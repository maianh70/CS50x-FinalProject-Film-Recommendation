# FILM RECOMMENDATION
#### Video Demo:  <https://youtu.be/lSnGicABkFc>

## Description:
This project aims to do two things:

- Film-to-Film Recommendation.

- Feeling-to-Film Recommendation.

1. Film-to-Film Recommendation
To recommend similar movies, the system takes the input of a movie’s title and release year. It first identifies the film using an API and extracts its plot. Then, I use the all-MiniLM-L6-v2 model from Sentence Transformers to embed the plot into a vector representation.

I also maintain a database of movie plots, which I embed using the same model. The system compares the input movie’s plot to every plot in the database using cosine similarity. Based on the scores, I recommend the most similar titles.

With the current data and method, I’m not fully confident in the results when the similarity score is below 0.5, though I set the similarity threshold at 0.4. In my opinion, the recommendations are about 60%–80% accurate overall, because some matches are spot-on, while others in the same batch may be less relevant. I haven’t yet implemented any system to improve the dataset over time.

2. Feeling-to-Film Recommendation
For mood-based recommendations, I use the same model, but instead of comparing plots, I compare the user's input sentence (e.g., "I feel nostalgic") to a set of genre-related prompts.

I curated a small dataset with 19 unique genres, each paired with a short descriptive sentence generated by AI. These sentences aim to reflect the emotional tone of each genre. I embed those 19 genre descriptions and compare them to the user's input. The genre with the highest similarity is selected, and I return 21 movies that match that genre.

At the end, I ask the user for feedback. If they are dissatisfied, I let them choose a better-matching genre. This helps me refine the dataset by pairing their original input sentence with the corrected genre, improving future results.

## Project Folder Structure and Description

### 1. Data Folder: Contains the datasets used in the project:

film_data_filtered_full(1).csv: IMDb IDs that match the genres I focus on; I also extract the unique genres from this file.

genre_emotion_map.csv: Maps genres to descriptive sentences (generated by AI) that represent the "feeling" of each genre.

mpst_full_data.csv: Extracting movie plots. 

### 2. Static Folder: Contains static files, including images and the CSS stylesheet.
I used common CSS patterns and adjusted them to fit the aesthetic and functional needs of this project.

### 3. Templates Folder: HTML files used to render web pages:

- cf_film.html: Displays all matched movies (title, poster, and release year) returned from the API based on the user's movie title input. Also shows an error message if no results are found.

- feeling_tf.html: Page where users input a sentence that describes their current mood or feelings.

- film_tf.html: Page where users input a movie title to find similar films. Displays an error message if the API can't identify the movie.

- index.html: The homepage, where users choose whether to find a film based on another film or based on their feelings.

- loading.html: A loading screen shown while processing results. Plot data is large, so emmbedding and comparison take some time.

- output.html: Displays the recommendation results. Each movie is linked to its IMDb page for further exploration. After a few seconds, a feedback form is shown. An error message appears if no matching movies are found.

### 4. app.py: this is the backend file built using Flask. It handles routing between pages and manages user interactions.

#### How it works

Accepts movie title or mood input from in feeling_tf() or film_tf() function.

If film to film:
- Receives movie title from the user.
- Calls an external API to retrieve matching movie data.
- Renders the cf_film page for the user to confirm the correct movie.
- Render movie's plot to output page then pass it to chosen_plot.py to embed and compare the input movie's plot with those in the dataset using cosine similarity.
- Shows the loading page during computation.
- Retrieves corresponding movie IDs with the similar plots from chosen_plot.py using data.py.
- Uses the IDs to fetch final movie information from the API.
- Renders the results on the output page.

If feeling to film:
- Receives a descriptive sentence about the user's current mood.
- Uses chosen_plot.py to embed the input sentence and compare it with a curated set of genre-based prompts.
- Identifies the genre with the highest similarity.
- Retrieve 21 movie IDs associated with that genre using data.py.
- Uses the IDs to fetch final movie information from the API.
- Renders the results on the output page.
- Collects user feedback for future dataset refinement (e.g., better matching prompts and genres).


### 5. data.py:
Uses pandas to load and manipulate data from the datasets in the data folder.

### 6. chosen_plot.py:
Handles embedding movie plots, comparing vectors, and calculating similarity scores.

### 7. update.py:
Reads and writes user feedback to a JSON file to help improve future recommendations.

### 8. corpus_embeddings(1).pt:
- Torch files containing precomputed embeddings for the plots in two datasets.
- All embeddings were precomputed in Google Colab for efficiency.
